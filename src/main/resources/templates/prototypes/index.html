<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">

  <head>
    <meta charset="UTF-8">
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/css/prototype.css}" rel="stylesheet" type="text/css">
    <title>ProtoSpace</title>

    <script>
      window.addEventListener('pageshow', function(event) {
        if (event.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {
          window.location.reload();  // 强制刷新页面，拿到最新的 like 状态
        }
      });
    </script>
  </head>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.like-btn.not-logged-in').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          // alert('ログインしてから、いいねを押してね！');
          window.location.href = 'users/login';
        });
      });
    });
  </script>
    
  <body>

    <!-- ヘッダー -->
    <div th:insert="~{header :: header}"></div>


    <div class="main_contents">
      
      <div th:replace="~{fragments/search_bar :: search_bar}"></div>
      <div th:replace="~{fragments/prototypes_view :: prototypes_view}"></div>
    </div>

    <!-- フッター -->
    <div th:insert="~{footer :: footer}"></div>

  </body>

</html>